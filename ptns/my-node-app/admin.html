<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kayıtlı Veriler</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Kayıtlı Form Verileri</h1>
        <div id="submissions"></div>
        
        <button class="btn btn-primary mt-3" onclick="exportData()">Verileri İndir (JSON)</button>
        <button class="btn btn-danger mt-3 ml-2" onclick="clearData()">Tüm Verileri Temizle</button>
    </div>

    <script>
        // Kayıtlı verileri göster
        function displaySubmissions() {
            const submissionsDiv = document.getElementById('submissions');
            const savedData = JSON.parse(localStorage.getItem('allSubmissions') || '[]');
            
            submissionsDiv.innerHTML = savedData.map((data, index) => `
                <div class="card mb-3">
                    <div class="card-header">
                        Kayıt #${index + 1} - ${new Date(data.timestamp).toLocaleString()}
                    </div>
                    <div class="card-body">
                        <h5>Form Bilgileri</h5>
                        <p>Yaş: ${data.age}</p>
                        <p>Şehir: ${data.city}</p>
                        <p>İlçe: ${data.district}</p>
                        <p>Cinsiyet: ${data.gender}</p>
                        <!-- Diğer form bilgileri -->
                        
                        <h5>Seçimler</h5>
                        ${data.selections.map((selection, i) => `
                            <div class="mb-3">
                                <strong>Seçim ${i + 1}:</strong>
                                <p>${selection.sentence}</p>
                                <p><em>Açıklama:</em> ${selection.explanation}</p>
                                <p><em>Yapılacaklar:</em> ${selection.actions}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Verileri JSON dosyası olarak indir
        function exportData() {
            const savedData = localStorage.getItem('allSubmissions');
            const blob = new Blob([savedData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'form-verileri.json';
            a.click();
        }

        // Tüm verileri temizle
        function clearData() {
            if (confirm('Tüm verileri silmek istediğinizden emin misiniz?')) {
                localStorage.removeItem('allSubmissions');
                displaySubmissions();
            }
        }

        // Sayfa yüklendiğinde verileri göster
        displaySubmissions();
    </script>
</body>
</html> 